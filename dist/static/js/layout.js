webpackJsonp([26],{"/3m3":function(e,t,o){var s=o("fP4C");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);o("bUva")("3e32a5ed",s,!0,{})},"I+xU":function(e,t,o){"use strict";t.a={name:"layout",data:function(){return{}},computed:{loginstate:function(){return this.$store.getters.loginstate}},watch:{loginstate:function(e,t){}},methods:{loginSuccess:function(e){this.Storage.setItem("uf",e.data.returnValue),this.$store.dispatch("SetLoginState",1)},loginFail:function(){this.Storage.setItem("uf",{}),this.Storage.setItem("loginDay",111),this.$store.dispatch("SetLoginState",2)},goNext:function(){this.api.getBn({url:"appSystemSet/getAppWajiName",params:{appKey:this.User.getAppKey()}}).then(function(e){e.data.successed?document.getElementsByTagName("title")[0].innerHTML=e.data.returnValue:document.getElementsByTagName("title")[0].innerHTML="娃娃机"}).catch(function(){document.getElementsByTagName("title")[0].innerHTML="娃娃机"})}},created:function(){var e=this,t=this.$route.query;if(console.log(t),t.appKey&&(t.appKey!==this.User.getAppKey()&&localStorage.clear(),"string"!=typeof t.appKey&&(t.appKey=t.appKey[0])),t.state){this.Storage.setItem("uf",{});var o=JSON.stringify(window.location.href),s=o.slice(1,o.indexOf(":"))+"://"+window.location.host;switch(t.state){case"weixin":this.$store.dispatch("WxLogin",{code:t.code}).then(function(t){console.log("微信登录成功"),e.loginSuccess(t),location.replace(s)}).catch(function(t){1===t&&e.loginFail(),console.log("微信登录失败"),location.replace(s)});break;case"uc":this.$store.dispatch("UcLogin",{code:t.code}).then(function(t){console.log("uc登录成功"),e.loginSuccess(t),location.replace(s)}).catch(function(t){1===t&&e.loginFail(),console.log("uc登录失败"),location.replace(s)});break;case"bd":console.log("bd"),this.$store.dispatch("BdLogin",{code:t.code}).then(function(t){console.log("bd登录成功"),e.loginSuccess(t),location.replace(s)}).catch(function(t){1===t&&e.loginFail(),console.log("bd登录失败"),location.replace(s)})}}else t.deviceId||this.Storage.getItemJson("urlMessage").deviceId?(this.$store.dispatch("SetMessage",{code:"visitMode",message:1}),t.deviceId&&t.deviceId!=this.Storage.getItemJson("urlMessage").deviceId&&(this.Storage.setItem("uf",{}),this.Storage.setItem("urlMessage",{}),this.Storage.setItem("urlMessage",t)),t.appUid?this.$store.dispatch("AutoLogin").then(function(t){console.log("游客免登录成功"),e.loginSuccess(t),e.$store.dispatch("SetMessage",{code:"userType",message:1}),e.$router.replace(e.$route.path)}).catch(function(t){console.log("游客免登录失败"),1===t&&e.loginFail()}):this.$store.dispatch("GetUserInfo").then(function(t){console.log("游客模式获取用户信息成功2",t),1==t.data.returnValue.isVisitor?e.$store.dispatch("SetMessage",{code:"userType",message:2}):e.$store.dispatch("SetMessage",{code:"userType",message:1}),e.loginSuccess(t)}).catch(function(t){1===t&&e.$store.dispatch("VisitorLogin").then(function(t){console.log("游客登录成功"),e.loginSuccess(t),e.$store.dispatch("SetMessage",{code:"userType",message:2}),e.$router.replace(e.$route.path)}).catch(function(t){1===t&&e.loginFail(),console.log("游客登录失败")}),console.log("获取用户信息失败2")})):t.appUid?(this.Storage.setItem("uf",{}),this.Storage.setItem("urlMessage",{}),this.Storage.setItem("urlMessage",t),this.$store.dispatch("AutoLogin").then(function(t){console.log("免登录成功"),e.loginSuccess(t),console.log(e.$route.path),e.$router.replace(e.$route.path)}).catch(function(t){1===t&&e.loginFail(),console.log("免登录失败")})):(console.log("没有uid"),t.appKey&&(console.log("有appKey"),t.appKey!=this.User.getAppKey()&&this.Storage.setItem("uf",{}),this.Storage.setItem("urlMessage",{}),this.Storage.setItem("urlMessage",t)),this.$store.dispatch("GetUserInfo").then(function(t){console.log("获取用户信息成功1"),e.loginSuccess(t)}).catch(function(t){1===t&&e.loginFail(),console.log("获取用户信息失败1")}));this.goNext()},mounted:function(){}}},IYAG:function(e,t,o){"use strict";function s(e){o("/3m3")}Object.defineProperty(t,"__esModule",{value:!0});var i=o("I+xU"),n=o("o1rw"),a=o("Aizv"),c=s,l=a(i.a,n.a,!1,c,"data-v-dc46f8b2",null);t.default=l.exports},fP4C:function(e,t,o){t=e.exports=o("yKCJ")(!1),t.push([e.i,"#layout[data-v-dc46f8b2]{margin:0 auto;width:18.75rem;position:relative}",""])},o1rw:function(e,t,o){"use strict";var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"layout"}},[o("router-view")],1)},i=[],n={render:s,staticRenderFns:i};t.a=n}});